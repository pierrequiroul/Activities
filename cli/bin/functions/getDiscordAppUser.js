import { Client } from "discord-rpc";
export let user;
export default function getDiscordAppUser() {
    return new Promise(async (res) => {
        if (user)
            return res(user);
        const client = new Client({ transport: "ipc" });
        const t = setTimeout(() => {
            if (user)
                return res(user);
            client.destroy().catch(() => { });
            res(undefined);
        }, 500);
        try {
            await client.login({ clientId: "503557087041683458" });
            clearTimeout(t);
            await client.destroy();
        }
        catch { }
        user = client.user;
        res(client.user);
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0RGlzY29yZEFwcFVzZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZnVuY3Rpb25zL2dldERpc2NvcmRBcHBVc2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxNQUFNLEVBQVEsTUFBTSxhQUFhLENBQUM7QUFFM0MsTUFBTSxDQUFDLElBQUksSUFBc0IsQ0FBQztBQUVsQyxNQUFNLENBQUMsT0FBTyxVQUFVLGlCQUFpQjtJQUN4QyxPQUFPLElBQUksT0FBTyxDQUFtQixLQUFLLEVBQUMsR0FBRyxFQUFDLEVBQUU7UUFDaEQsSUFBSSxJQUFJO1lBQUUsT0FBTyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFM0IsTUFBTSxNQUFNLEdBQUcsSUFBSSxNQUFNLENBQUMsRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztRQUVoRCxNQUFNLENBQUMsR0FBRyxVQUFVLENBQUMsR0FBRyxFQUFFO1lBQ3pCLElBQUksSUFBSTtnQkFBRSxPQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUUzQixNQUFNLENBQUMsT0FBTyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ2pDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNoQixDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFFUixJQUFJO1lBQ0gsTUFBTSxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsUUFBUSxFQUFFLG9CQUFvQixFQUFFLENBQUMsQ0FBQztZQUN2RCxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDaEIsTUFBTSxNQUFNLENBQUMsT0FBTyxFQUFFLENBQUM7U0FDdkI7UUFBQyxNQUFNLEdBQUU7UUFFVixJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQztRQUVuQixHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2xCLENBQUMsQ0FBQyxDQUFDO0FBQ0osQ0FBQyJ9